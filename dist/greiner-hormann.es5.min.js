/*
 Licensed under MIT License
*/
function l(){function k(a){this.k=this.first=null;for(var c=0,b=a.length;c<b;c++)this.g(new h(a[c]))}function n(a,c,b,d){this.i=this.toSource=this.y=this.x=0;var e=(d.y-b.y)*(c.x-a.x)-(d.x-b.x)*(c.y-a.y);0!==e&&(this.toSource=((d.x-b.x)*(a.y-b.y)-(d.y-b.y)*(a.x-b.x))/e,this.i=((c.x-a.x)*(a.y-b.y)-(c.y-a.y)*(a.x-b.x))/e,this.valid()&&(this.x=a.x+this.toSource*(c.x-a.x),this.y=a.y+this.toSource*(c.y-a.y)))}function h(a,c){Array.isArray(a)&&(c=a[1],a=a[0]);this.x=a;this.y=c;this.d=this.c=this.next=null;
this.j=0;this.f=!0;this.e=this.a=!1}function m(a,c,b,d){a=new k(a);c=new k(c);return a.clip(c,b,d)}h.l=function(a,c,b){a=new h(a,c);a.j=b;a.a=!0;a.f=!1;return a};h.prototype.o=function(){this.e=!0;null===this.d||this.d.e||this.d.o()};h.prototype.b=function(a){return this.x===a.x&&this.y===a.y};h.prototype.n=function(a){var c=!1,b=a.first,d=b.next,e=this.x,g=this.y;do(b.y<g&&d.y>=g||d.y<g&&b.y>=g)&&(b.x<=e||d.x<=e)&&(c^=b.x+(g-b.y)/(d.y-b.y)*(d.x-b.x)<e),b=b.next,d=b.next||a.first;while(!b.b(a.first));
return c};n.prototype.valid=function(){return 0<this.toSource&&1>this.toSource&&0<this.i&&1>this.i};k.prototype.g=function(a){if(null==this.first)this.first=a,this.first.next=a,this.first.c=a;else{var c=this.first,b=c.c;c.c=a;a.next=c;a.c=b;b.next=a}};k.prototype.m=function(a,c,b){for(;!c.b(b)&&c.j<a.j;)c=c.next;a.next=c;b=c.c;a.c=b;b.next=a;c.c=a};k.prototype.h=function(a){for(;a.a;)a=a.next;return a};k.prototype.q=function(){var a=this.p||this.first;do{if(a.a&&!a.e)break;a=a.next}while(!a.b(this.first));
return this.p=a};k.prototype.r=function(){var a=this.k||this.first;do{if(a.a&&!a.e)return this.k=a,!0;a=a.next}while(!a.b(this.first));this.k=null;return!1};k.prototype.clip=function(a,c,b){var d=this.first,e=a.first,g,f;do{if(!d.a){do e.a||(f=new n(d,this.h(d.next),e,a.h(e.next)),f.valid()&&(g=h.l(f.x,f.y,f.toSource),f=h.l(f.x,f.y,f.i),g.d=f,f.d=g,this.m(g,d,this.h(d.next)),a.m(f,e,a.h(e.next)))),e=e.next;while(!e.b(a.first))}d=d.next}while(!d.b(this.first));d=this.first;e=a.first;g=d.n(a);f=e.n(this);
c^=g;b^=f;do d.a&&(d.f=c,c=!c),d=d.next;while(!d.b(this.first));do e.a&&(e.f=b,b=!b),e=e.next;while(!e.b(a.first));for(c=[];this.r();){b=this.q();d=new k([]);d.g(new h(b.x,b.y));do{b.o();if(b.f){do b=b.next,d.g(new h(b.x,b.y));while(!b.a)}else{do b=b.c,d.g(new h(b.x,b.y));while(!b.a)}b=b.d}while(!b.e);c.push(d)}0===c.length&&(g&&c.push(this),f&&c.push(a));return c};return{union:function(a,c){return m(a,c,!1,!1)},intersection:function(a,c){return m(a,c,!0,!0)},diff:function(a,c){return m(a,c,!1,!0)}}}
"function"===typeof define&&define.s?define([],l):"object"===typeof exports?module.exports=l():window.greinerHormann=l();
