function l(){function k(a){this.first=null;for(var b=this.k=0,c=a.length;b<c;b++)this.i(new f(a[b]))}function m(a,b,c,d){this.j=this.toSource=this.y=this.x=0;var e=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y);0!==e&&(this.toSource=((d.x-c.x)*(a.y-c.y)-(d.y-c.y)*(a.x-c.x))/e,this.j=((b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x))/e,this.valid()&&(this.x=a.x+this.toSource*(b.x-a.x),this.y=a.y+this.toSource*(b.y-a.y)))}function f(a,b){Array.isArray(a)&&(b=a[1],a=a[0]);this.x=a;this.y=b;this.d=this.c=this.next=null;
this.l=0;this.h=!0;this.f=this.a=!1}function n(a,b,c,d){var e=[],h=[],g,f;g=0;for(f=a.e.length;g<f;g++)e.push([a.e[g].u,a.e[g].t]);g=0;for(f=b.e.length;g<f;g++)h.push([b.e[g].u,b.e[g].t]);e=new k(e);h=new k(h);a=e.clip(h,c,d);if(0<a.length){g=0;for(f=a.length;g<f;g++){b=a;c=g;d=a[g];if(d=d.r().slice(0,d.k-1))for(e=0,h=d.length;e<h;e++)d[e]=[d[e][1],d[e][0]];else d=null;b[c]=d}return a?1===a.length?a[0]:a:null}return null}Array.isArray=Array.isArray||function(a){return Boolean(a&&"[object Array]"===
Object.prototype.toString.call(Object(a)))};f.m=function(a,b,c){a=new f(a,b);a.l=c;a.a=!0;a.h=!1;return a};f.prototype.p=function(){this.f=!0;null===this.d||this.d.f||this.d.p()};f.prototype.b=function(a){return this.x===a.x&&this.y===a.y};f.prototype.o=function(a){var b=0,c=new f(Infinity,this.y),d=a.first,e;do e=new m(this,c,d,a.g(d.next)),!d.a&&e.valid()&&b++,d=d.next;while(!d.b(a.first));return 0!==b%2};m.prototype.valid=function(){return 0<this.toSource&&1>this.toSource&&0<this.j&&1>this.j};
k.prototype.i=function(a){if(null==this.first)this.first=a,this.first.next=a,this.first.c=a;else{var b=this.first,c=b.c;b.c=a;a.next=b;a.c=c;c.next=a}this.k++};k.prototype.n=function(a,b,c){for(;!b.b(c)&&b.l<a.l;)b=b.next;a.next=b;c=b.c;a.c=c;c.next=a;b.c=a;this.k++};k.prototype.g=function(a){for(;a.a;)a=a.next;return a};k.prototype.q=function(){var a=this.first;do{if(a.a&&!a.f)break;a=a.next}while(!a.b(this.first));return a};k.prototype.s=function(){var a=this.first;do{if(a.a&&!a.f)return!0;a=a.next}while(!a.b(this.first));
return!1};k.prototype.r=function(){for(var a=[],b=this.first,c=0;c<this.k;c++)a[c]=[b.x,b.y],b=b.next;return a};k.prototype.clip=function(a,b,c){var d=this.first,e=a.first;do{if(!d.a){do{if(!e.a){var h=new m(d,this.g(d.next),e,a.g(e.next));if(h.valid()){var g=f.m(h.x,h.y,h.toSource),h=f.m(h.x,h.y,h.j);g.d=h;h.d=g;this.n(g,d,this.g(d.next));a.n(h,e,a.g(e.next))}}e=e.next}while(!e.b(a.first))}d=d.next}while(!d.b(this.first));d=this.first;e=a.first;b^=d.o(a);c^=e.o(this);do d.a&&(d.h=b,b=!b),d=d.next;
while(!d.b(this.first));do e.a&&(e.h=c,c=!c),e=e.next;while(!e.b(a.first));for(a=[];this.s();){b=this.q();c=new k([]);c.i(new f(b.x,b.y));do{b.p();if(b.h){do b=b.next,c.i(new f(b.x,b.y));while(!b.a)}else{do b=b.c,c.i(new f(b.x,b.y));while(!b.a)}b=b.d}while(!b.f);a.push(c)}return a};return{union:function(a,b){return n(a,b,!1,!1)},intersection:function(a,b){return n(a,b,!0,!0)},diff:function(a,b){return n(a,b,!1,!0)}}}
"function"===typeof define&&define.v?define([],l):"object"===typeof exports?module.w=l():window.greinerHormann=l();
