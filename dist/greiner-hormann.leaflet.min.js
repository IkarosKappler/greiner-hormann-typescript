!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.greinerHormann=b()}(this,function(){function d(a,b,d,f){var i,j,k,g=[],h=[];for(j=0,k=a._latlngs.length;k>j;j++)g.push([a._latlngs[j].lng,a._latlngs[j].lat]);for(j=0,k=b._latlngs.length;k>j;j++)h.push([b._latlngs[j].lng,b._latlngs[j].lat]);if(g=new c(g),h=new c(h),i=g.clip(h,d,f),i.length>0){for(var j=0,k=i.length;k>j;j++)i[j]=e(i[j]);return i?1===i.length?i[0]:i:null}return null}function e(a){var b=a.getPoints().slice(0,a.vertices-1);if(b){for(var c=0,d=b.length;d>c;c++)b[c]=[b[c][1],b[c][0]];return b}return null}Array.isArray=Array.isArray||function(a){return Boolean(a&&"[object Array]"===Object.prototype.toString.call(Object(a)))};var a=function(a,b){Array.isArray(a)&&(b=a[1],a=a[0]),this.x=a,this.y=b,this.next=null,this.prev=null,this._corresponding=null,this._distance=0,this._isEntry=!0,this._isIntersection=!1,this._visited=!1};a.createIntersection=function(b,c,d){var e=new a(b,c);return e._distance=d,e._isIntersection=!0,e._isEntry=!1,e},a.prototype.setChecked=function(){this._visited=!0,null===this._corresponding||this._corresponding._visited||this._corresponding.setChecked()},a.prototype.equals=function(a){return this.x===a.x&&this.y===a.y},a.prototype.isInside=function(c){var g,d=0,e=new a(1/0,this.y),f=c.first;do g=new b(this,e,f,c.getNext(f.next)),!f._isIntersection&&g.valid()&&d++,f=f.next;while(!f.equals(c.first));return 0!==d%2};var b=function(a,b,c,d){this.x=0,this.y=0,this.toSource=0,this.toClip=0;var e=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y);0!==e&&(this.toSource=((d.x-c.x)*(a.y-c.y)-(d.y-c.y)*(a.x-c.x))/e,this.toClip=((b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x))/e,this.valid()&&(this.x=a.x+this.toSource*(b.x-a.x),this.y=a.y+this.toSource*(b.y-a.y)))};b.prototype.valid=function(){return 0<this.toSource&&this.toSource<1&&0<this.toClip&&this.toClip<1};var c=function(b){this.first=null,this.vertices=0;for(var c=0,d=b.length;d>c;c++)this.addVertex(new a(b[c]))};return c.prototype.addVertex=function(a){if(null==this.first)this.first=a,this.first.next=a,this.first.prev=a;else{var b=this.first,c=b.prev;b.prev=a,a.next=b,a.prev=c,c.next=a}this.vertices++},c.prototype.insertVertex=function(a,b,c){for(var d,e=b;!e.equals(c)&&e._distance<a._distance;)e=e.next;a.next=e,d=e.prev,a.prev=d,d.next=a,e.prev=a,this.vertices++},c.prototype.getNext=function(a){for(var b=a;b._isIntersection;)b=b.next;return b},c.prototype.getFirstIntersect=function(){var a=this.first;do{if(a._isIntersection&&!a._visited)break;a=a.next}while(!a.equals(this.first));return a},c.prototype.hasUnprocessed=function(){var a=this.first;do{if(a._isIntersection&&!a._visited)return!0;a=a.next}while(!a.equals(this.first));return!1},c.prototype.getPoints=function(){for(var a=[],b=this.first,c=0;c<this.vertices;c++)a[c]=[b.x,b.y],b=b.next;return a},c.prototype.clip=function(d,e,f){var g=this.first,h=d.first;do{if(!g._isIntersection)do{if(!h._isIntersection){var i=new b(g,this.getNext(g.next),h,d.getNext(h.next));if(i.valid()){var j=a.createIntersection(i.x,i.y,i.toSource),k=a.createIntersection(i.x,i.y,i.toClip);j._corresponding=k,k._corresponding=j,this.insertVertex(j,g,this.getNext(g.next)),d.insertVertex(k,h,d.getNext(h.next))}}h=h.next}while(!h.equals(d.first));g=g.next}while(!g.equals(this.first));g=this.first,h=d.first,e^=g.isInside(d),f^=h.isInside(this);do g._isIntersection&&(g._isEntry=e,e=!e),g=g.next;while(!g.equals(this.first));do h._isIntersection&&(h._isEntry=f,f=!f),h=h.next;while(!h.equals(d.first));for(var l=[];this.hasUnprocessed();){var m=this.getFirstIntersect(),n=new c([]);n.addVertex(new a(m.x,m.y));do{if(m.setChecked(),m._isEntry){do m=m.next,n.addVertex(new a(m.x,m.y));while(!m._isIntersection)}else do m=m.prev,n.addVertex(new a(m.x,m.y));while(!m._isIntersection);m=m._corresponding}while(!m._visited);l.push(n)}return l},{union:function(a,b){return d(a,b,!1,!1)},intersection:function(a,b){return d(a,b,!0,!0)},diff:function(a,b){return d(a,b,!1,!0)}}});