/*
 MIT
 @author Milevski Alexander (c) 2014
 @preserve
*/
(function(p){"object"===typeof exports&&"undefined"!==typeof module?module.exports=p():"function"===typeof define&&define.G?define([],p):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).greinerHormann=p()})(function(){return function c(l,h,d){function g(b,f){if(!h[b]){if(!l[b]){var e="function"==typeof require&&require;if(!f&&e)return e(b,!0);if(a)return a(b,!0);e=Error("Cannot find module '"+b+"'");throw e.code="MODULE_NOT_FOUND",e;}e=h[b]=
{exports:{}};l[b][0].call(e.exports,function(a){var c=l[b][1][a];return g(c?c:a)},e,e.exports,c,l,h,d)}return h[b].exports}for(var a="function"==typeof require&&require,b=0;b<d.length;b++)g(d[b]);return g}({1:[function(l,h){var d=l("./polygon");h.exports=function(c,g,a,b){c=new d(c);g=new d(g);return c.clip(g,a,b)}},{"./polygon":4}],2:[function(l,h){var d=l("./clip");h.exports={union:function(c,g){return d(c,g,!1,!1)},intersection:function(c,g){return d(c,g,!0,!0)},diff:function(c,g){return d(c,g,
!1,!0)},clip:d}},{"./clip":1}],3:[function(l,h){function d(c,d,a,b){this.m=this.toSource=this.y=this.x=0;var e=(b.y-a.y)*(d.x-c.x)-(b.x-a.x)*(d.y-c.y);0!==e&&(this.toSource=((b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x))/e,this.m=((d.x-c.x)*(c.y-a.y)-(d.y-c.y)*(c.x-a.x))/e,this.valid()&&(this.x=c.x+this.toSource*(d.x-c.x),this.y=c.y+this.toSource*(d.y-c.y)))}d.prototype.valid=function(){return 0<this.toSource&&1>this.toSource&&0<this.m&&1>this.m};h.exports=d},{}],4:[function(l,h){function d(a,b){this.s=
this.first=null;this.u="undefined"===typeof b?Array.isArray(a[0]):b;for(var e=0,d=a.length;e<d;e++)this.j(new c(a[e]))}var c=l("./vertex"),g=l("./intersection");d.prototype.j=function(a){if(null==this.first)this.first=a,this.first.next=a,this.first.f=a;else{var b=this.first,c=b.f;b.f=a;a.next=b;a.f=c;c.next=a}};d.prototype.w=function(a,b,c){for(;!b.c(c)&&b.o<a.o;)b=b.next;a.next=b;c=b.f;a.f=c;c.next=a;b.f=a};d.prototype.l=function(a){for(;a.b;)a=a.next;return a};d.prototype.D=function(){var a=this.C||
this.first;do{if(a.b&&!a.h)break;a=a.next}while(!a.c(this.first));return this.C=a};d.prototype.F=function(){var a=this.s||this.first;do{if(a.b&&!a.h)return this.s=a,!0;a=a.next}while(!a.c(this.first));this.s=null;return!1};d.prototype.a=function(){var a=[],b=this.first;if(this.u){do a.push([b.x,b.y]),b=b.next;while(b!==this.first)}else{do a.push({x:b.x,y:b.y}),b=b.next;while(b!==this.first)}return a};d.prototype.clip=function(a,b,e){var f=this.first,m=a.first,h=!b&&!e,l=b&&e;do{if(!f.b){do{if(!m.b){var k=
new g(f,this.l(f.next),m,a.l(m.next));if(k.valid()){var n=c.v(k.x,k.y,k.toSource);k=c.v(k.x,k.y,k.m);n.g=k;k.g=n;this.w(n,f,this.l(f.next));a.w(k,m,a.l(m.next))}}m=m.next}while(!m.c(a.first))}f=f.next}while(!f.c(this.first));f=this.first;m=a.first;n=f.A(a);k=m.A(this);b^=n;e^=k;do f.b&&(f.i=b,b=!b),f=f.next;while(!f.c(this.first));do m.b&&(m.i=e,e=!e),m=m.next;while(!m.c(a.first));for(b=[];this.F();){e=this.D();f=new d([],this.u);f.j(new c(e.x,e.y));do{e.B();if(e.i){do e=e.next,f.j(new c(e.x,e.y));
while(!e.b)}else{do e=e.f,f.j(new c(e.x,e.y));while(!e.b)}e=e.g}while(!e.h);b.push(f.a())}0===b.length&&(h?n?b.push(a.a()):k?b.push(this.a()):b.push(this.a(),a.a()):l?n?b.push(this.a()):k&&b.push(a.a()):n?b.push(a.a(),this.a()):k?b.push(this.a(),a.a()):b.push(this.a()),0===b.length&&(b=null));return b};h.exports=d},{"./intersection":3,"./vertex":5}],5:[function(l,h){function d(c,d){1===arguments.length&&(Array.isArray(c)?(d=c[1],c=c[0]):(d=c.y,c=c.x));this.x=c;this.y=d;this.g=this.f=this.next=null;
this.o=0;this.i=!0;this.h=this.b=!1}d.v=function(c,g,a){c=new d(c,g);c.o=a;c.b=!0;c.i=!1;return c};d.prototype.B=function(){this.h=!0;null===this.g||this.g.h||this.g.B()};d.prototype.c=function(c){return this.x===c.x&&this.y===c.y};d.prototype.A=function(c){var d=!1,a=c.first,b=a.next,e=this.x,f=this.y;do(a.y<f&&b.y>=f||b.y<f&&a.y>=f)&&(a.x<=e||b.x<=e)&&(d^=a.x+(f-a.y)/(b.y-a.y)*(b.x-a.x)<e),a=a.next,b=a.next||c.first;while(!a.c(c.first));return d};h.exports=d},{}]},{},[2])(2)});
