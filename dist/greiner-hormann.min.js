/*
 MIT
 @author Milevski Alexander (c) 2014
 @preserve
*/
(function(m){"object"===typeof exports&&"undefined"!==typeof module?module.exports=m():"function"===typeof define&&define.G?define([],m):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).greinerHormann=m()})(function(){return function h(f,d,b){function k(c,g){if(!d[c]){if(!f[c]){var e="function"==typeof require&&require;if(!g&&e)return e(c,!0);if(a)return a(c,!0);e=Error("Cannot find module '"+c+"'");throw e.code="MODULE_NOT_FOUND",e;}e=d[c]=
{exports:{}};f[c][0].call(e.exports,function(a){var b=f[c][1][a];return k(b?b:a)},e,e.exports,h,f,d,b)}return d[c].exports}for(var a="function"==typeof require&&require,c=0;c<b.length;c++)k(b[c]);return k}({1:[function(h,f){var d=h("./polygon");f.exports=function(b,k,a,c){b=new d(b);k=new d(k);return b.clip(k,a,c)}},{"./polygon":4}],2:[function(h,f){var d=h("./clip");f.exports={union:function(b,k){return d(b,k,!1,!1)},intersection:function(b,k){return d(b,k,!0,!0)},diff:function(b,k){return d(b,k,
!1,!0)},clip:d}},{"./clip":1}],3:[function(h,f){function d(b,d,a,c){this.l=this.toSource=this.y=this.x=0;var e=(c.y-a.y)*(d.x-b.x)-(c.x-a.x)*(d.y-b.y);0!==e&&(this.toSource=((c.x-a.x)*(b.y-a.y)-(c.y-a.y)*(b.x-a.x))/e,this.l=((d.x-b.x)*(b.y-a.y)-(d.y-b.y)*(b.x-a.x))/e,this.valid()&&(this.x=b.x+this.toSource*(d.x-b.x),this.y=b.y+this.toSource*(d.y-b.y)))}d.prototype.valid=function(){return 0<this.toSource&&1>this.toSource&&0<this.l&&1>this.l};f.exports=d},{}],4:[function(h,f){function d(a,c){this.o=
this.first=null;this.u="undefined"===typeof c?Array.isArray(a[0]):c;for(var e=0,d=a.length;e<d;e++)this.i(new b(a[e]))}var b=h("./vertex"),k=h("./intersection");d.prototype.i=function(a){if(null==this.first)this.first=a,this.first.next=a,this.first.c=a;else{var c=this.first,b=c.c;c.c=a;a.next=c;a.c=b;b.next=a}};d.prototype.w=function(a,c,b){for(;!c.b(b)&&c.m<a.m;)c=c.next;a.next=c;b=c.c;a.c=b;b.next=a;c.c=a};d.prototype.j=function(a){for(;a.a;)a=a.next;return a};d.prototype.D=function(){var a=this.C||
this.first;do{if(a.a&&!a.g)break;a=a.next}while(!a.b(this.first));return this.C=a};d.prototype.F=function(){var a=this.o||this.first;do{if(a.a&&!a.g)return this.o=a,!0;a=a.next}while(!a.b(this.first));this.o=null;return!1};d.prototype.s=function(){var a=[],b=this.first;if(this.u){do a.push([b.x,b.y]),b=b.next;while(b!==this.first)}else{do a.push({x:b.x,y:b.y}),b=b.next;while(b!==this.first)}return a};d.prototype.clip=function(a,c,e){var g=this.first,l=a.first;do{if(!g.a){do{if(!l.a){var f=new k(g,
this.j(g.next),l,a.j(l.next));if(f.valid()){var h=b.v(f.x,f.y,f.toSource);f=b.v(f.x,f.y,f.l);h.f=f;f.f=h;this.w(h,g,this.j(g.next));a.w(f,l,a.j(l.next))}}l=l.next}while(!l.b(a.first))}g=g.next}while(!g.b(this.first));g=this.first;l=a.first;h=g.A(a);f=l.A(this);c^=h;e^=f;do g.a&&(g.h=c,c=!c),g=g.next;while(!g.b(this.first));do l.a&&(l.h=e,e=!e),l=l.next;while(!l.b(a.first));for(c=[];this.F();){e=this.D();g=new d([],this.u);g.i(new b(e.x,e.y));do{e.B();if(e.h){do e=e.next,g.i(new b(e.x,e.y));while(!e.a)
}else{do e=e.c,g.i(new b(e.x,e.y));while(!e.a)}e=e.f}while(!e.g);c.push(g.s())}0===c.length&&(h&&c.push(this.s()),f&&c.push(a.s()),0===c.length&&(c=null));return c};f.exports=d},{"./intersection":3,"./vertex":5}],5:[function(h,f){function d(b,d){1===arguments.length&&(Array.isArray(b)?(d=b[1],b=b[0]):(d=b.y,b=b.x));this.x=b;this.y=d;this.f=this.c=this.next=null;this.m=0;this.h=!0;this.g=this.a=!1}d.v=function(b,f,a){b=new d(b,f);b.m=a;b.a=!0;b.h=!1;return b};d.prototype.B=function(){this.g=!0;null===
this.f||this.f.g||this.f.B()};d.prototype.b=function(b){return this.x===b.x&&this.y===b.y};d.prototype.A=function(b){var d=!1,a=b.first,c=a.next,e=this.x,f=this.y;do(a.y<f&&c.y>=f||c.y<f&&a.y>=f)&&(a.x<=e||c.x<=e)&&(d^=a.x+(f-a.y)/(c.y-a.y)*(c.x-a.x)<e),a=a.next,c=a.next||b.first;while(!a.b(b.first));return d};f.exports=d},{}]},{},[2])(2)});
