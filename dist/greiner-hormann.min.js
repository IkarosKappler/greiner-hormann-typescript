/*
 Licensed under MIT License
*/
function m(){function k(a,b){this.k=this.first=null;this.m="undefined"===typeof b?Array.isArray(a[0]):b;for(var c=0,d=a.length;c<d;c++)this.g(new h(a[c]))}function n(a,b,c,d){this.i=this.toSource=this.y=this.x=0;var e=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y);0!==e&&(this.toSource=((d.x-c.x)*(a.y-c.y)-(d.y-c.y)*(a.x-c.x))/e,this.i=((b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x))/e,this.valid()&&(this.x=a.x+this.toSource*(b.x-a.x),this.y=a.y+this.toSource*(b.y-a.y)))}function h(a,b){1===arguments.length&&(Array.isArray(a)?
(b=a[1],a=a[0]):(b=a.y,a=a.x));this.x=a;this.y=b;this.d=this.c=this.next=null;this.j=0;this.f=!0;this.e=this.a=!1}function l(a,b,c,d){a=new k(a);b=new k(b);return a.clip(b,c,d)}Array.isArray=Array.isArray||function(a){return Boolean(a&&"[object Array]"===Object.prototype.toString.call(Object(a)))};h.n=function(a,b,c){a=new h(a,b);a.j=c;a.a=!0;a.f=!1;return a};h.prototype.q=function(){this.e=!0;null===this.d||this.d.e||this.d.q()};h.prototype.b=function(a){return this.x===a.x&&this.y===a.y};h.prototype.p=
function(a){var b=!1,c=a.first,d=c.next,e=this.x,g=this.y;do(c.y<g&&d.y>=g||d.y<g&&c.y>=g)&&(c.x<=e||d.x<=e)&&(b^=c.x+(g-c.y)/(d.y-c.y)*(d.x-c.x)<e),c=c.next,d=c.next||a.first;while(!c.b(a.first));return b};n.prototype.valid=function(){return 0<this.toSource&&1>this.toSource&&0<this.i&&1>this.i};k.prototype.g=function(a){if(null==this.first)this.first=a,this.first.next=a,this.first.c=a;else{var b=this.first,c=b.c;b.c=a;a.next=b;a.c=c;c.next=a}};k.prototype.o=function(a,b,c){for(;!b.b(c)&&b.j<a.j;)b=
b.next;a.next=b;c=b.c;a.c=c;c.next=a;b.c=a};k.prototype.h=function(a){for(;a.a;)a=a.next;return a};k.prototype.s=function(){var a=this.r||this.first;do{if(a.a&&!a.e)break;a=a.next}while(!a.b(this.first));return this.r=a};k.prototype.t=function(){var a=this.k||this.first;do{if(a.a&&!a.e)return this.k=a,!0;a=a.next}while(!a.b(this.first));this.k=null;return!1};k.prototype.l=function(){var a=[],b=this.first;if(this.m){do a.push([b.x,b.y]),b=b.next;while(b!==this.first)}else{do a.push({x:b.x,y:b.y}),
b=b.next;while(b!==this.first)}return a};k.prototype.clip=function(a,b,c){var d=this.first,e=a.first,g,f;do{if(!d.a){do e.a||(f=new n(d,this.h(d.next),e,a.h(e.next)),f.valid()&&(g=h.n(f.x,f.y,f.toSource),f=h.n(f.x,f.y,f.i),g.d=f,f.d=g,this.o(g,d,this.h(d.next)),a.o(f,e,a.h(e.next)))),e=e.next;while(!e.b(a.first))}d=d.next}while(!d.b(this.first));d=this.first;e=a.first;g=d.p(a);f=e.p(this);b^=g;c^=f;do d.a&&(d.f=b,b=!b),d=d.next;while(!d.b(this.first));do e.a&&(e.f=c,c=!c),e=e.next;while(!e.b(a.first));
for(b=[];this.t();){c=this.s();d=new k([],this.m);d.g(new h(c.x,c.y));do{c.q();if(c.f){do c=c.next,d.g(new h(c.x,c.y));while(!c.a)}else{do c=c.c,d.g(new h(c.x,c.y));while(!c.a)}c=c.d}while(!c.e);b.push(d.l())}0===b.length&&(g&&b.push(this.l()),f&&b.push(a.l()),0===b.length&&(b=null));return b};return{union:function(a,b){return l(a,b,!1,!1)},intersection:function(a,b){return l(a,b,!0,!0)},diff:function(a,b){return l(a,b,!1,!0)},clip:l}}
"function"===typeof define&&define.u?define([],m):"object"===typeof exports?module.exports=m():window.greinerHormann=m();
