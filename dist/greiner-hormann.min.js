function l(){function h(a){this.first=null;for(var b=0,c=a.length;b<c;b++)this.h(new f(a[b]))}function m(a,b,c,d){this.i=this.toSource=this.y=this.x=0;var e=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y);0!==e&&(this.toSource=((d.x-c.x)*(a.y-c.y)-(d.y-c.y)*(a.x-c.x))/e,this.i=((b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x))/e,this.valid()&&(this.x=a.x+this.toSource*(b.x-a.x),this.y=a.y+this.toSource*(b.y-a.y)))}function f(a,b){Array.isArray(a)&&(b=a[1],a=a[0]);this.x=a;this.y=b;this.d=this.c=this.next=null;this.j=
0;this.g=!0;this.e=this.a=!1}function k(a,b,c,d){a=new h(a);b=new h(b);return a.clip(b,c,d)}Array.isArray=Array.isArray||function(a){return Boolean(a&&"[object Array]"===Object.prototype.toString.call(Object(a)))};f.k=function(a,b,c){a=new f(a,b);a.j=c;a.a=!0;a.g=!1;return a};f.prototype.n=function(){this.e=!0;null===this.d||this.d.e||this.d.n()};f.prototype.b=function(a){return this.x===a.x&&this.y===a.y};f.prototype.m=function(a){var b=0,c=new f(Infinity,this.y),d=a.first,e;do e=new m(this,c,d,
a.f(d.next)),!d.a&&e.valid()&&b++,d=d.next;while(!d.b(a.first));return 0!==b%2};m.prototype.valid=function(){return 0<this.toSource&&1>this.toSource&&0<this.i&&1>this.i};h.prototype.h=function(a){if(null==this.first)this.first=a,this.first.next=a,this.first.c=a;else{var b=this.first,c=b.c;b.c=a;a.next=b;a.c=c;c.next=a}};h.prototype.l=function(a,b,c){for(;!b.b(c)&&b.j<a.j;)b=b.next;a.next=b;c=b.c;a.c=c;c.next=a;b.c=a};h.prototype.f=function(a){for(;a.a;)a=a.next;return a};h.prototype.o=function(){var a=
this.first;do{if(a.a&&!a.e)break;a=a.next}while(!a.b(this.first));return a};h.prototype.p=function(){var a=this.first;do{if(a.a&&!a.e)return!0;a=a.next}while(!a.b(this.first));return!1};h.prototype.clip=function(a,b,c){var d=this.first,e=a.first;do{if(!d.a){do{if(!e.a){var g=new m(d,this.f(d.next),e,a.f(e.next));if(g.valid()){var k=f.k(g.x,g.y,g.toSource),g=f.k(g.x,g.y,g.i);k.d=g;g.d=k;this.l(k,d,this.f(d.next));a.l(g,e,a.f(e.next))}}e=e.next}while(!e.b(a.first))}d=d.next}while(!d.b(this.first));
d=this.first;e=a.first;b^=d.m(a);c^=e.m(this);do d.a&&(d.g=b,b=!b),d=d.next;while(!d.b(this.first));do e.a&&(e.g=c,c=!c),e=e.next;while(!e.b(a.first));for(a=[];this.p();){b=this.o();c=new h([]);c.h(new f(b.x,b.y));do{b.n();if(b.g){do b=b.next,c.h(new f(b.x,b.y));while(!b.a)}else{do b=b.c,c.h(new f(b.x,b.y));while(!b.a)}b=b.d}while(!b.e);a.push(c)}return a};return{union:function(a,b){return k(a,b,!1,!1)},intersection:function(a,b){return k(a,b,!0,!0)},diff:function(a,b){return k(a,b,!1,!0)}}}
"function"===typeof define&&define.q?define([],l):"object"===typeof exports?module.r=l():window.greinerHormann=l();
