/*
 Licensed under MIT License
*/
function l(){function k(a){this.k=this.first=null;for(var b=0,c=a.length;b<c;b++)this.g(new h(a[b]))}function n(a,b,c,d){this.i=this.toSource=this.y=this.x=0;var e=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y);0!==e&&(this.toSource=((d.x-c.x)*(a.y-c.y)-(d.y-c.y)*(a.x-c.x))/e,this.i=((b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x))/e,this.valid()&&(this.x=a.x+this.toSource*(b.x-a.x),this.y=a.y+this.toSource*(b.y-a.y)))}function h(a,b){Array.isArray(a)&&(b=a[1],a=a[0]);this.x=a;this.y=b;this.d=this.c=this.next=null;
this.j=0;this.f=!0;this.e=this.a=!1}function m(a,b,c,d){a=new k(a);b=new k(b);return a.clip(b,c,d)}Array.isArray=Array.isArray||function(a){return Boolean(a&&"[object Array]"===Object.prototype.toString.call(Object(a)))};h.l=function(a,b,c){a=new h(a,b);a.j=c;a.a=!0;a.f=!1;return a};h.prototype.o=function(){this.e=!0;null===this.d||this.d.e||this.d.o()};h.prototype.b=function(a){return this.x===a.x&&this.y===a.y};h.prototype.n=function(a){var b=!1,c=a.first,d=c.next,e=this.x,g=this.y;do(c.y<g&&d.y>=
g||d.y<g&&c.y>=g)&&(c.x<=e||d.x<=e)&&(b^=c.x+(g-c.y)/(d.y-c.y)*(d.x-c.x)<e),c=c.next,d=c.next||a.first;while(!c.b(a.first));return b};n.prototype.valid=function(){return 0<this.toSource&&1>this.toSource&&0<this.i&&1>this.i};k.prototype.g=function(a){if(null==this.first)this.first=a,this.first.next=a,this.first.c=a;else{var b=this.first,c=b.c;b.c=a;a.next=b;a.c=c;c.next=a}};k.prototype.m=function(a,b,c){for(;!b.b(c)&&b.j<a.j;)b=b.next;a.next=b;c=b.c;a.c=c;c.next=a;b.c=a};k.prototype.h=function(a){for(;a.a;)a=
a.next;return a};k.prototype.q=function(){var a=this.p||this.first;do{if(a.a&&!a.e)break;a=a.next}while(!a.b(this.first));return this.p=a};k.prototype.r=function(){var a=this.k||this.first;do{if(a.a&&!a.e)return this.k=a,!0;a=a.next}while(!a.b(this.first));this.k=null;return!1};k.prototype.clip=function(a,b,c){var d=this.first,e=a.first,g,f;do{if(!d.a){do e.a||(f=new n(d,this.h(d.next),e,a.h(e.next)),f.valid()&&(g=h.l(f.x,f.y,f.toSource),f=h.l(f.x,f.y,f.i),g.d=f,f.d=g,this.m(g,d,this.h(d.next)),a.m(f,
e,a.h(e.next)))),e=e.next;while(!e.b(a.first))}d=d.next}while(!d.b(this.first));d=this.first;e=a.first;g=d.n(a);f=e.n(this);b^=g;c^=f;do d.a&&(d.f=b,b=!b),d=d.next;while(!d.b(this.first));do e.a&&(e.f=c,c=!c),e=e.next;while(!e.b(a.first));for(a=[];this.r();){b=this.q();c=new k([]);c.g(new h(b.x,b.y));do{b.o();if(b.f){do b=b.next,c.g(new h(b.x,b.y));while(!b.a)}else{do b=b.c,c.g(new h(b.x,b.y));while(!b.a)}b=b.d}while(!b.e);a.push(c)}0===a.length&&(g&&a.push(this),f&&a.push(this));return a};return{union:function(a,
b){return m(a,b,!1,!1)},intersection:function(a,b){return m(a,b,!0,!0)},diff:function(a,b){return m(a,b,!1,!0)}}}"function"===typeof define&&define.s?define([],l):"object"===typeof exports?module.exports=l():window.greinerHormann=l();
